<!DOCTYPE html>
<html> 
<head> 
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
	<title>Customer Locations</title> 
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHKjurndAThRXV5QyBUKXZ_eKGh3V5d9M&callback=initMap"
	type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head> 

<body>
  	<div id="map"></div>

  	<script type="text/javascript">

   	var locations = [
		["<b>Albertsons</br>Anna Arbor</br>241 E Country Club Drive</br>89015</br>702 555 8484</br>El Bigo Motor</br>10HP</br>El Cheap filter</br>8</br>05/22/16</br>Robinson</b>","241 E Country Club Drive 89015"],
		["<b></br>Bert Bernard</br>600 College Dr</br>89015</br>ph1</br>mm1</br>mHP1</br>fil1</br>fils1</br>ls1</br>sb1</b>","600 College Dr 89015"],
		["<b>Caesars Entertainment Corp.</br>Carl Cooper</br>1 Caesars Palace Drive</br>89109</br>ph2</br>mm2</br>mHP2</br>fil2</br>fils2</br>ls2</br>sb2</b>","1 Caesars Palace Drive 89109"],
		["<b></br>David Darwin</br>100 Burkholder Blvd</br>89015</br>ph3</br>mm3</br>mHP3</br>fil3</br>fils3</br>ls3</br>sb3</b>","100 Burkholder Blvd 89015"],
		["<b></br>Ethan Edgar</br>400 N Valle Verde Dr</br>89015</br>ph4</br>mm4</br>mHP4</br>fil4</br>fils4</br>ls4</br>sb4</b>","400 N Valle Verde Dr 89015"],
		["<b></br>Frank Ford</br>2300 PEBBLE RD</br>89015</br>ph5</br>mm5</br>mHP5</br>fil5</br>fils5</br>ls5</br>sb5</b>","2300 PEBBLE RD 89015"],
		["<b></br>Gary Go</br>51 E Pacific Ave</br>89015</br>ph6</br>mm6</br>mHP6</br>fil6</br>fils6</br>ls6</br>sb6</b>","51 E Pacific Ave 89015"],
		["<b>Hughes Corp</br>Harry Henderson</br>240 Water Street</br>89015</br>ph7</br>mm7</br>mHP7</br>fil7</br>fils7</br>ls7</br>sb7</b>","240 Water Street 89015"],
		["<b></br>Ingrid Ivan</br>175 N Stephanie St</br>89074</br>ph8</br>mm8</br>mHP8</br>fil8</br>fils8</br>ls8</br>sb8</b>","175 N Stephanie St 89074"],
		["<b>Fake Corp</br>Peyton Manning</br>605 anatolia st </br>89145</br>ph9</br>mm9</br>mHP9</br>fil9</br>fils9</br>ls9</br>sb9</b>","605 anatolia st  89145"],
		["<b>Kenworth Sales Company</br>Kelly Kellerson</br>3033 Losee Road</br>89030</br>ph10</br>mm10</br>mHP10</br>fil10</br>fils10</br>ls10</br>sb10</b>","3033 Losee Road 89030"],
		["<b>Las Vegas Sands Corp.</br>Laura Little</br>3355 Las Vegas Blvd. South</br>89109</br>ph11</br>mm11</br>mHP11</br>fil11</br>fils11</br>ls11</br>sb11</b>","3355 Las Vegas Blvd. South, 89109"]
	];


	var delay = 100;
	var infowindow = new google.maps.InfoWindow();
	var latlng = new google.maps.LatLng(36.1468966580206,-115.14239686803545);

	var mapOptions = {
		zoom: 11,
		center: latlng,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	}
  
	var geocoder = new google.maps.Geocoder(); 
	var map = new google.maps.Map(document.getElementById("map"), mapOptions);
	var bounds = new google.maps.LatLngBounds();

	function geocodeAddress(address, theInfo, next) {
	    geocoder.geocode({address:address}, function (results,status){ 
		    if (status == google.maps.GeocoderStatus.OK) {
				var p = results[0].geometry.location;
				var lat=p.lat();
				var lng=p.lng();
				createMarker(theInfo,lat,lng);
		    }
		    else {
		     	if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
		     		nextAddress--;
		     		delay++;
		    	} 
  			}
  			next();
		}
	);}

	function createMarker(theInfo,lat,lng) {
		console.log(theInfo);
		var contentString = theInfo;
		var marker = new google.maps.Marker({position: new google.maps.LatLng(lat,lng), map: map,});

		google.maps.event.addListener(marker, 'click', function() {
	    	infowindow.setContent(contentString); 
	    	infowindow.open(map,marker);
		});

	   bounds.extend(marker.position);
	}

	function theNext() {
		if (nextAddress < locations.length) {
			setTimeout('geocodeAddress("'+locations[nextAddress][1]+'","'+locations[nextAddress][0] +'",theNext)', delay);
			nextAddress++;
		} 
		else {
			map.fitBounds(bounds);
		}
	}

	var nextAddress = 0;
	theNext();

</script>

</body>
</html>